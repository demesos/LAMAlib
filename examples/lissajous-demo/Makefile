# Lissajous Sprite Demo - Makefile
#
# Targets:
#   make              build both pattern PRGs
#   make pretzel      build pretzel pattern only
#   make inf          build infinity pattern only
#   make tables       regenerate .inc table files from Python script
#   make clean        remove generated files

CC65_HOME  ?= $(HOME)/cc65
export PATH := $(CC65_HOME)/bin:$(PATH)

CL65        = cl65
CFG         = c64-onefiler-basicfriendly-asm.cfg
SRC         = lissajous_demo.s
CL65FLAGS   = -t c64 -g "$(SRC)" -lib LAMAlib.lib -C $(CFG) -u __EXEHDR__

INCS        = lissajous_inf.inc

.PHONY: all  tables clean

all: lissajous_demo.prg

# Tables are generated by the Python script
$(INCS): lissajou_gen.py
	python lissajou_gen.py

tables: $(INCS)

lissajous_demo.prg: $(SRC) lissajous_inf.inc
	$(CL65) $(CL65FLAGS) -o $@

clean:
	rm -f lissajous_inf.inc lissajous_demo.prg *.o
